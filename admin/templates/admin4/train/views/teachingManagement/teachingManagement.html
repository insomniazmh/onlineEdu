<link href="../../../assets/admin/pages/css/profile-old.css" rel="stylesheet">
<style>
	.label-text {
		margin-top: 8px;
	}
	.blockEdit{
    margin-top: -20px;
    width: auto;
    border-bottom: 3px solid #ddd;
    height: 30px;
    margin-bottom: 20px;
  }
	
	
</style>
<div class="row" ng-controller="enrollCtrl">
	<div class="col-md-12">
		<!-- BEGIN EXAMPLE TABLE PORTLET-->
		<div class="portlet box grey-cascade">
			<div class="portlet-title">
				<div class="caption">
					<i class="fa fa-globe"></i>培训方案
				</div>
				<div class="actions">
					<a href="javascript:;" class="btn red">
					<i class="fa fa-plus"></i> 添加 </a>
				</div>
			</div>
			<div class="portlet-body">
				<div class="table-toolbar">
					<div data-ng-include="'components/search.html'"></div>
				</div>
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>操作</th>
							<!-- <th>项目名称</th>
							<th>方案编号</th> -->
							<th>方案名称</th>
							<th>报名开始时间</th>
							<th>报名截止时间</th>
							<th>方案开始时间</th>
							<th>方案截止时间</th>
							<th>项目课程</th>
							<th>创建人</th>
							<th>创建时间</th>
						</tr>
					</thead>
					<tbody>
						<tr class="odd gradeX" ng-repeat="item in data">
							<td style="min-width: 150px;">
								<!--<button ng-show='!item.edit' class="btn btn-info btn-sm" ng-click="add($index)">新增</button>-->
								<button class="btn btn-info btn-sm">编辑</button>
								<button class="btn btn-info btn-sm" ng-click="planCourses()">课程</button>
								<button class="btn btn-info btn-sm" ng-click="classPeople()">班级</button>
							</td>
							<!-- <td>商务金融</td>
							<td>20180901</td> -->
							<td>商务金融驻马店培训一期</td>
							<td>2019-8-11</td>
							<td>2019-8-20</td>
							<td>2019-8-21</td>
							<td>2019-9-21</td>
							<td>会计,商务礼仪</td>
							<td>张三</td>
							<td>2019-8-11</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- END EXAMPLE TABLE PORTLET-->
	</div>
	
	<!-- 培训方案课程 -->
	<div class="modal fade" id="planCoursesModal" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog modal-full">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">培训方案课程</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-12 export-option">
							<input type="checkbox" name="basicVar" value="studentId" /><span style="font-weight: 600;">会计</span>（主讲：张三）
							<input type="checkbox" name="basicVar" value="specialtyName" /><span style="font-weight: 600;">会计</span>（主讲：李四）
							<input type="checkbox" name="basicVar" value="centerId" /><span style="font-weight: 600;">商务礼仪</span>（主讲：王五）
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- 班级-人员 -->
	<div class="modal fade" id="class_peopleModal" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog modal-full">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
					<h4 class="modal-title">培训方案班级和学员</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-6">
							<h4 style="margin-bottom: 20px;">班级信息<a href="javascript:;" class="btn red btn-sm" style="float: right;">
							<i class="fa fa-plus"></i> 添加班级 </a></h4>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>操作</th>
										<th>班级名称</th>
										<th>班级负责人</th>
										<th>负责人联系方式</th>
										<th>线上/线下</th>
										<th>班级成员签字表</th>
									</tr>
								</thead>
								<tbody>
									<tr class="{{item.active ? 'td-active' : ''}}" ng-repeat="item in data" ng-click='chooseClass(item)'>
										<td style="min-width: 150px;">
											<!--<button ng-show='!item.edit' class="btn btn-info btn-sm" ng-click="add($index)">新增</button>-->
											<button class="btn btn-info btn-sm">编辑</button>
										</td>
										<td>商务金融驻马店培训一班</td>
										<td>张三</td>
										<td>13943436565</td>
										<td>线下</td>
										<td><a>上传</a>&nbsp;&nbsp;&nbsp;&nbsp;<a>查看</a></td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col-md-6" style="border-left: 1px solid #45B6AF;">
							<h4 style="margin-bottom: 20px;">班级人员<a href="javascript:;" class="btn red btn-sm" style="float: right;">
							<i class="fa fa-plus"></i> 添加人员 </a></h4>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>操作</th>
										<th>姓名</th>
										<th>性别</th>
										<th>民族</th>
										<th>单位职务</th>
										<th>身份证号</th>
										<th>联系方式</th>
									</tr>
								</thead>
								<tbody>
									<tr class="gradeX odd">
										<td>
											<button class="btn btn-info btn-xs">编辑</button>
										</td>
										<td>张三</td>
										<td>男</td>
										<td>汉族</td>
										<td>科长</td>
										<td>4101013243545</td>
										<td>13546567767</td>
									</tr>
									<tr class="gradeX odd">
										<td>
											<button class="btn btn-info btn-xs">编辑</button>
										</td>
										<td>李四</td>
										<td>女</td>
										<td>汉族</td>
										<td>处长</td>
										<td>4101013243545</td>
										<td>我的评语</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>
<script>
	function enrollCtrl($scope, $http, $rootScope) {
		$scope.data = [{active: true}, {}];
		$scope.add = function(index) {
			$scope.flag = 'add';
			$scope.dataDetail.splice(index+1, 0, {
				edit: true
			});
		}
		
		$scope.edit = function(plan) {
			$scope.flag = 'edit';
			plan.edit = true;
		}
		
		$scope.save = function(plan) {
			alert("保存成功");
			plan.edit = false;
		};
		
		$scope.cancel = function(plan, index) {
			if($scope.flag == 'add') {
				$scope.dataDetail.splice(index, 1);
			}else if($scope.flag == 'edit') {
				plan.edit = false;				
			}
		};
		
		$scope.chooseClass = function(cls) {
			console.log(cls)
			for(let value of $scope.data) {
				if(value.active) value.active = false
				
			}
			cls.active = true
		} 
		
		$scope.planCourses = function() {
			$("#planCoursesModal").modal('show');
		}
		
		$scope.classPeople = function() {
			$("#class_peopleModal").modal('show');
		}
	}
</script>